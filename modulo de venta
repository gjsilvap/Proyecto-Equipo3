/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package Interfaz;

import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import javax.swing.JFrame;
import javax.swing.JOptionPane;

/**
 *
 * @author Toshiba
 */
public class ModuloVenta extends javax.swing.JFrame {

    /**
     * Creates new form NewJFrame
     */
    public ModuloVenta() {
        initComponents();
        setSize(279,440);
        setResizable(false);
        this.textocant.setEnabled(false);
        this.nombreven.setEnabled(false);
        this.apellidoven.setEnabled(false);
        this.direccionven.setEnabled(false);
        this.telefonoven.setEnabled(false);
        this.productoven.setEnabled(false);
        this.costoven.setEnabled(false);
        this.fechaven.setEnabled(false);
        this.jLabelRegistrar.setEnabled(false);
        this.costotal.setEnabled(false);
        this.iva.setEnabled(false);
        this.codigoinv.setEnabled(false);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        jLayeredPane1 = new javax.swing.JLayeredPane();
        jPanel1 = new javax.swing.JPanel();
        jPanel3 = new javax.swing.JPanel();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        fechaven = new com.toedter.calendar.JDateChooser();
        boxidentidad = new javax.swing.JComboBox<>();
        cedulaven = new javax.swing.JTextField();
        jLabel9 = new javax.swing.JLabel();
        costoven = new javax.swing.JTextField();
        productoven = new javax.swing.JTextField();
        jLabelBuscar = new javax.swing.JLabel();
        jLabelRegistrar = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        telefonoven = new javax.swing.JTextField();
        nombreven = new javax.swing.JTextField();
        apellidoven = new javax.swing.JTextField();
        direccionven = new javax.swing.JTextField();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        jlabelagregarcliente = new javax.swing.JLabel();
        jLabel10 = new javax.swing.JLabel();
        textocant = new javax.swing.JTextField();
        costotal = new javax.swing.JTextField();
        iva = new javax.swing.JTextField();
        jLabel11 = new javax.swing.JLabel();
        jLabel12 = new javax.swing.JLabel();
        jLabel16 = new javax.swing.JLabel();
        codigoinv = new javax.swing.JTextField();
        jLabel17 = new javax.swing.JLabel();
        jLabel7 = new javax.swing.JLabel();
        jLabel13 = new javax.swing.JLabel();
        jLabel14 = new javax.swing.JLabel();
        jLabel15 = new javax.swing.JLabel();

        jLabel1.setText("jLabel1");

        javax.swing.GroupLayout jLayeredPane1Layout = new javax.swing.GroupLayout(jLayeredPane1);
        jLayeredPane1.setLayout(jLayeredPane1Layout);
        jLayeredPane1Layout.setHorizontalGroup(
            jLayeredPane1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 100, Short.MAX_VALUE)
        );
        jLayeredPane1Layout.setVerticalGroup(
            jLayeredPane1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 100, Short.MAX_VALUE)
        );

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("REGISTRO DE VENTA");
        setUndecorated(true);

        jPanel1.setBackground(new java.awt.Color(32, 15, 42));
        jPanel1.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(204, 102, 255)));

        jPanel3.setBackground(new java.awt.Color(32, 15, 42));
        jPanel3.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jLabel5.setFont(new java.awt.Font("Agency FB", 0, 18)); // NOI18N
        jLabel5.setForeground(new java.awt.Color(255, 255, 255));
        jLabel5.setText("Producto");
        jPanel3.add(jLabel5, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 210, -1, -1));

        jLabel6.setFont(new java.awt.Font("Agency FB", 0, 18)); // NOI18N
        jLabel6.setForeground(new java.awt.Color(255, 255, 255));
        jLabel6.setText("Fecha");
        jPanel3.add(jLabel6, new org.netbeans.lib.awtextra.AbsoluteConstraints(70, 300, 40, -1));
        jPanel3.add(fechaven, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 300, 130, -1));

        boxidentidad.setFont(new java.awt.Font("Agency FB", 0, 18)); // NOI18N
        boxidentidad.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "V-", "E-", "P-", "J-", "G-" }));
        boxidentidad.setToolTipText("Seleccione un tipo de documento de identidad\ndel cliente para buscar sus datos.");
        boxidentidad.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                boxidentidadActionPerformed(evt);
            }
        });
        jPanel3.add(boxidentidad, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 20, 50, 20));

        cedulaven.setToolTipText("Campo de texto para buscar el cliente mediante\nsu documento de identidad.");
        cedulaven.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                cedulavenFocusGained(evt);
            }
        });
        cedulaven.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                cedulavenKeyTyped(evt);
            }
        });
        jPanel3.add(cedulaven, new org.netbeans.lib.awtextra.AbsoluteConstraints(110, 20, 74, -1));

        jLabel9.setFont(new java.awt.Font("Agency FB", 0, 18)); // NOI18N
        jLabel9.setForeground(new java.awt.Color(255, 255, 255));
        jLabel9.setText("Costo");
        jPanel3.add(jLabel9, new org.netbeans.lib.awtextra.AbsoluteConstraints(70, 240, -1, -1));

        costoven.setToolTipText("Costo del producto Unitario.");
        costoven.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                costovenFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                costovenFocusLost(evt);
            }
        });
        costoven.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                costovenActionPerformed(evt);
            }
        });
        costoven.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                costovenKeyReleased(evt);
            }
            public void keyTyped(java.awt.event.KeyEvent evt) {
                costovenKeyTyped(evt);
            }
        });
        jPanel3.add(costoven, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 240, 130, -1));

        productoven.setToolTipText("Nombre del producto");
        jPanel3.add(productoven, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 210, 130, -1));

        jLabelBuscar.setFont(new java.awt.Font("Agency FB", 0, 18)); // NOI18N
        jLabelBuscar.setForeground(new java.awt.Color(255, 255, 255));
        jLabelBuscar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Imagenes/search_1.png"))); // NOI18N
        jLabelBuscar.setText("BUSCAR");
        jLabelBuscar.setToolTipText("Boton para buscar los datos del cliente \nmediante la cedula de identidad.");
        jLabelBuscar.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jLabelBuscar.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jLabelBuscarMouseClicked(evt);
            }
        });
        jPanel3.add(jLabelBuscar, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 20, 89, 20));

        jLabelRegistrar.setFont(new java.awt.Font("Agency FB", 0, 20)); // NOI18N
        jLabelRegistrar.setForeground(new java.awt.Color(255, 255, 255));
        jLabelRegistrar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Imagenes/plus.png"))); // NOI18N
        jLabelRegistrar.setText(" REGISTRAR");
        jLabelRegistrar.setToolTipText("Boton para registrar la venta realizada.\nNo se procedera al registro si se encuentran campos vacios.");
        jLabelRegistrar.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jLabelRegistrar.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jLabelRegistrarMouseClicked(evt);
            }
        });
        jPanel3.add(jLabelRegistrar, new org.netbeans.lib.awtextra.AbsoluteConstraints(90, 380, -1, -1));

        jLabel2.setFont(new java.awt.Font("Agency FB", 0, 18)); // NOI18N
        jLabel2.setForeground(new java.awt.Color(255, 255, 255));
        jLabel2.setText("Nombre");
        jPanel3.add(jLabel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 60, -1, -1));

        telefonoven.setToolTipText("Telfono del cliente.");
        telefonoven.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                telefonovenFocusGained(evt);
            }
        });
        telefonoven.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                telefonovenKeyTyped(evt);
            }
        });
        jPanel3.add(telefonoven, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 150, 130, -1));

        nombreven.setToolTipText("Nombre del cliente.");
        jPanel3.add(nombreven, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 60, 130, -1));

        apellidoven.setToolTipText("Apellido del cliente.");
        apellidoven.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                apellidovenActionPerformed(evt);
            }
        });
        jPanel3.add(apellidoven, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 90, 130, -1));

        direccionven.setToolTipText("Direccion de donde vive el cliente.");
        direccionven.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                direccionvenActionPerformed(evt);
            }
        });
        jPanel3.add(direccionven, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 120, 130, -1));

        jLabel3.setFont(new java.awt.Font("Agency FB", 0, 18)); // NOI18N
        jLabel3.setForeground(new java.awt.Color(255, 255, 255));
        jLabel3.setText("Apellido");
        jPanel3.add(jLabel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 90, -1, -1));

        jLabel4.setFont(new java.awt.Font("Agency FB", 0, 18)); // NOI18N
        jLabel4.setForeground(new java.awt.Color(255, 255, 255));
        jLabel4.setText("Direccion");
        jPanel3.add(jLabel4, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 120, -1, -1));

        jLabel8.setFont(new java.awt.Font("Agency FB", 0, 18)); // NOI18N
        jLabel8.setForeground(new java.awt.Color(255, 255, 255));
        jLabel8.setText("Telefono");
        jPanel3.add(jLabel8, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 150, -1, -1));

        jlabelagregarcliente.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Imagenes/plus.png"))); // NOI18N
        jlabelagregarcliente.setToolTipText("Boton para abrir la ventana de REGISTRO DE CLIENTE.");
        jlabelagregarcliente.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jlabelagregarcliente.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jlabelagregarclienteMouseClicked(evt);
            }
        });
        jPanel3.add(jlabelagregarcliente, new org.netbeans.lib.awtextra.AbsoluteConstraints(190, 20, -1, -1));

        jLabel10.setFont(new java.awt.Font("Agency FB", 0, 18)); // NOI18N
        jLabel10.setForeground(new java.awt.Color(255, 255, 255));
        jLabel10.setText("Cantidad");
        jPanel3.add(jLabel10, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 270, -1, -1));

        textocant.setToolTipText("Cantidad del producto que se vendera.");
        textocant.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                textocantFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                textocantFocusLost(evt);
            }
        });
        textocant.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                textocantKeyReleased(evt);
            }
            public void keyTyped(java.awt.event.KeyEvent evt) {
                textocantKeyTyped(evt);
            }
        });
        jPanel3.add(textocant, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 270, 130, -1));

        costotal.setToolTipText("Costo total de lo que pagara el cliente.");
        costotal.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                costotalActionPerformed(evt);
            }
        });
        jPanel3.add(costotal, new org.netbeans.lib.awtextra.AbsoluteConstraints(55, 340, 80, -1));

        iva.setToolTipText("IVA que se pagara de la venta.");
        jPanel3.add(iva, new org.netbeans.lib.awtextra.AbsoluteConstraints(180, 340, 90, -1));

        jLabel11.setFont(new java.awt.Font("Agency FB", 0, 18)); // NOI18N
        jLabel11.setForeground(new java.awt.Color(255, 255, 255));
        jLabel11.setText("Costo");
        jPanel3.add(jLabel11, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 340, -1, -1));

        jLabel12.setFont(new java.awt.Font("Agency FB", 0, 18)); // NOI18N
        jLabel12.setForeground(new java.awt.Color(255, 255, 255));
        jLabel12.setText("IVA");
        jPanel3.add(jLabel12, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 340, -1, 20));

        jLabel16.setFont(new java.awt.Font("Agency FB", 0, 18)); // NOI18N
        jLabel16.setForeground(new java.awt.Color(255, 255, 255));
        jLabel16.setText("Código");
        jPanel3.add(jLabel16, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 180, -1, -1));

        codigoinv.setToolTipText("Codigo del producto que se vendera al cliente.");
        codigoinv.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                codigoinvFocusGained(evt);
            }
        });
        codigoinv.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                codigoinvKeyTyped(evt);
            }
        });
        jPanel3.add(codigoinv, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 180, 130, -1));

        jLabel17.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Imagenes/search_1.png"))); // NOI18N
        jLabel17.setToolTipText("Boton para buscar el producto que se desea vender mediante el codigo.");
        jLabel17.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jLabel17.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jLabel17MouseClicked(evt);
            }
        });
        jPanel3.add(jLabel17, new org.netbeans.lib.awtextra.AbsoluteConstraints(260, 180, -1, -1));

        jLabel7.setFont(new java.awt.Font("Agency FB", 0, 24)); // NOI18N
        jLabel7.setForeground(new java.awt.Color(255, 255, 255));
        jLabel7.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel7.setText("DATOS DE LA VENTA");

        jLabel13.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel13.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Imagenes/icons8_Delete_25px_1.png"))); // NOI18N
        jLabel13.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jLabel13.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jLabel13MouseClicked(evt);
            }
        });

        jLabel14.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel14.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Imagenes/icons8_Minus_25px_1.png"))); // NOI18N
        jLabel14.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jLabel14MouseClicked(evt);
            }
        });

        jLabel15.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel15.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Imagenes/icons8_Unchecked_Checkbox_25px.png"))); // NOI18N

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jLabel14)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jLabel15)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jLabel13))
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(48, 48, 48)
                .addComponent(jPanel3, javax.swing.GroupLayout.PREFERRED_SIZE, 295, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 59, Short.MAX_VALUE))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addComponent(jLabel7, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGap(25, 25, 25))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel14)
                    .addComponent(jLabel15)
                    .addComponent(jLabel13))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jLabel7)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanel3, javax.swing.GroupLayout.PREFERRED_SIZE, 418, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(26, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>                        

    private void boxidentidadActionPerformed(java.awt.event.ActionEvent evt) {                                             
        // TODO add your handling code here:
    }                                            

    private void costovenActionPerformed(java.awt.event.ActionEvent evt) {                                         
        // TODO add your handling code here:
    }                                        

    private void jLabelRegistrarMouseClicked(java.awt.event.MouseEvent evt) {                                             
        Pattern p= Pattern.compile("[^0-9]");
        Matcher m=p.matcher(cedulaven.getText());
        if(m.find() || ((cedulaven.getText().length()< 6) && (cedulaven.getText().length()> 8)))
        { JOptionPane.showMessageDialog(new JFrame(),"La cedula debe ser mayor a 6 digitos y menor a 9 digitos","Alerta",JOptionPane.WARNING_MESSAGE);
        }
        else{
            try
            {
                if((this.nombreven.getText().equals("")) || (this.direccionven.getText().equals("")) || (this.telefonoven.getText().equals("")) || (this.productoven.getText().equals(""))
                        || (this.costoven.getText().equals(""))){
                    JOptionPane.showMessageDialog(new JFrame(), "Rellene todos los campos", "Alerta", JOptionPane.WARNING_MESSAGE);
                }
                else{
                    Conexion conec = new Conexion();
                    conec.ConectarBDatos();
                    DateFormat formatter = new SimpleDateFormat("yyyy/MM/dd");
                    Date fecha = this.fechaven.getDate();
                    String fechatext = formatter.format(fecha);
                    Integer cant = Integer.parseInt(this.textocant.getText());
                    float costo = Float.parseFloat(this.costoven.getText());
                    float costotalventa = costo*cant;
                    float ivaventa = (Float.parseFloat(this.costoven.getText())*cant)*16/100;
                    conec.sql="SELECT inventario.* from inventario where codigo_inv='"+this.codigoinv.getText()+"'";
                    conec.tb=conec.stm.executeQuery(conec.sql);
                    if(conec.tb.next()){
                        Integer cantprod = Integer.parseInt(conec.tb.getString("cant"));
                        int cantnva = cantprod-cant;
                        if(cantnva < 0){
                            JOptionPane.showMessageDialog(new JFrame(),"No es posible registrar. Inventario negativo,\nInventario actual del producto: "+cantprod,"Mensaje",JOptionPane.INFORMATION_MESSAGE);
                            conec.DesconectarBD();
                        }
                        else{
                        conec.sql="INSERT INTO ventas(cedula_ven, productoventa,cant_venta, costo_venta, costotal_ven, fecha_venta) VALUES ('"+this.boxidentidad.getSelectedItem()+this.cedulaven.getText()+"','"+this.productoven.getText()+"','"+this.textocant.getText()+"','"+costo+"','"+costotalventa+"','"+fechatext+"')";
                        conec.stm.executeUpdate(conec.sql);
                        conec.sql="INSERT INTO impuesto(costo_total, impuesto, fecha_imp) VALUES ('"+costo+"','"+ivaventa+"','"+fechatext+"')";
                        conec.stm.executeUpdate(conec.sql);
                        conec.sql="UPDATE inventario set cant='"+cantnva+"' where codigo_inv='"+this.codigoinv.getText()+"'";
                        conec.stm.executeUpdate(conec.sql);
                        JOptionPane.showMessageDialog(new JFrame(),"Venta realizada","Mensaje",JOptionPane.INFORMATION_MESSAGE);
                        conec.DesconectarBD();
                        }
                    }
                    this.nombreven.setText("");
                    this.apellidoven.setText("");
                    this.telefonoven.setText("");
                    this.direccionven.setText("");
                    this.productoven.setText("");
                    this.textocant.setText("");
                    this.costoven.setText("");
                    this.codigoinv.setText("");
                    this.costotal.setText("");
                    this.iva.setText("");
                    this.nombreven.setEnabled(false);
                    this.apellidoven.setEnabled(false);
                    this.direccionven.setEnabled(false);
                    this.telefonoven.setEnabled(false);
                    this.productoven.setEnabled(false);
                    this.costoven.setEnabled(false);
                    this.fechaven.setEnabled(false);
                    this.textocant.setEnabled(false);
                    this.jLabelRegistrar.setEnabled(false);
                    this.cedulaven.setEnabled(true);
                    this.cedulaven.setText("");
                    this.cedulaven.requestFocus();
                }
            }
            catch(Exception e2)
            {
                System.out.println("Error en incluir "+e2);
            }
        }
    }                                            

    private void jLabelBuscarMouseClicked(java.awt.event.MouseEvent evt) {                                          
        if(this.cedulaven.getText().equals("")){
            JOptionPane.showMessageDialog(new JFrame(),"Rellene el campo de identidad","Mensaje",JOptionPane.INFORMATION_MESSAGE);
        }
        else{
        try{
            Conexion conec = new Conexion();
            conec.ConectarBDatos();
            conec.sql="Select clientes.* from clientes where cedula= '"+this.boxidentidad.getSelectedItem()+cedulaven.getText()+"'";
            conec.tb=conec.stm.executeQuery(conec.sql);//ejecutando el select
            if(conec.tb.next()){
                this.nombreven.setText(conec.tb.getString("nombre"));
                this.apellidoven.setText(conec.tb.getString("apellido"));
                this.direccionven.setText(conec.tb.getString("direccion"));
                this.telefonoven.setText(conec.tb.getString("telf"));
                this.cedulaven.setEnabled(false);
                this.nombreven.setEnabled(false);
                this.apellidoven.setEnabled(false);
                this.direccionven.setEnabled(false);
                this.telefonoven.setEnabled(false);
                this.jLabelRegistrar.setEnabled(true);
                this.codigoinv.setEnabled(true);
                conec.DesconectarBD();
            }
            else{
                JOptionPane.showMessageDialog(new JFrame(),"Cedula no registrada,\nhaga click en el boton +\npara anañadir un nuevo cliente.","Mensaje",JOptionPane.INFORMATION_MESSAGE);
            }
        }
        catch(Exception e2)
        {
            System.out.println("Error en JDBC");
        }
        }
    }                                         

    private void apellidovenActionPerformed(java.awt.event.ActionEvent evt) {                                            
        // TODO add your handling code here:
    }                                           

    private void direccionvenActionPerformed(java.awt.event.ActionEvent evt) {                                             
        // TODO add your handling code here:
    }                                            

    private void jlabelagregarclienteMouseClicked(java.awt.event.MouseEvent evt) {                                                  
        ModuloRegistro registro = new ModuloRegistro();
        registro.setVisible(true);
        registro.setLocationRelativeTo(null);
        registro.setSize(389, 430);
    }                                                 

    private void costotalActionPerformed(java.awt.event.ActionEvent evt) {                                         
        // TODO add your handling code here:
    }                                        

    private void jLabel13MouseClicked(java.awt.event.MouseEvent evt) {                                      
        this.dispose();
        // TODO add your handling code here:
    }                                     

    private void jLabel14MouseClicked(java.awt.event.MouseEvent evt) {                                      
        this.setExtendedState(ICONIFIED);
        // TODO add your handling code here:
    }                                     

    private void costovenFocusLost(java.awt.event.FocusEvent evt) {                                   
       /* if(this.costoven.getText().equals("0") || this.costoven.getText().equals("")){
            JOptionPane.showMessageDialog(new JFrame(),"Rellene el campo con un valor distinto de 0","Mensaje",JOptionPane.INFORMATION_MESSAGE);
        }
        else{
        Integer cant = Integer.parseInt(this.textocant.getText());
        float mostrarcosto=Float.parseFloat(this.costoven.getText())*cant;
        float mostrariva= (Float.parseFloat(this.costoven.getText())*cant)*16/100;
        this.costotal.setText(Float.toString(mostrarcosto));
        this.iva.setText(Float.toString(mostrariva));
        }*/
    }                                  

    private void textocantFocusLost(java.awt.event.FocusEvent evt) {                                    
        if(this.textocant.getText().equals("0") || this.textocant.getText().equals("")){
            JOptionPane.showMessageDialog(new JFrame(),"Rellene el campo con un valor distinto de 0","Mensaje",JOptionPane.INFORMATION_MESSAGE);
        }
        else{
                    Integer cant = Integer.parseInt(this.textocant.getText());
        float mostrarcosto=Float.parseFloat(this.costoven.getText())*cant;
        float mostrariva= (Float.parseFloat(this.costoven.getText())*cant)*16/100;
        this.costotal.setText(Float.toString(mostrarcosto));
        this.iva.setText(Float.toString(mostrariva));
        }
    }                                   

    private void jLabel17MouseClicked(java.awt.event.MouseEvent evt) {                                      
        try{
            Conexion conec = new Conexion();
            conec.ConectarBDatos();
            conec.sql="Select inventario.* from inventario where codigo_inv='"+this.codigoinv.getText()+"'";
            conec.tb=conec.stm.executeQuery(conec.sql);//ejecutando el select
            if(conec.tb.next()){
                this.productoven.setText(conec.tb.getString("producto"));
                this.codigoinv.setEnabled(false);
                this.productoven.setEnabled(false);
                this.textocant.setEnabled(true);
                this.costoven.setEnabled(true);
                this.fechaven.setEnabled(true);
                this.jLabelRegistrar.setEnabled(true);
                conec.DesconectarBD();
            }
            else{
                int resp=JOptionPane.showConfirmDialog(this, "Producto inexistente, desea agregar?","Advertencia",0, JOptionPane.QUESTION_MESSAGE);
        if(resp==0){
            ModuloCompra moduloc = new ModuloCompra();
            moduloc.setVisible(true);
            moduloc.setLocationRelativeTo(null);
            moduloc.setSize(617,330);
        }
            
            }
        }
        catch(Exception e2)
        {
            System.out.println("Error en JDBC");
        }
    }                                     

    private void cedulavenKeyTyped(java.awt.event.KeyEvent evt) {                                   
        char c = evt.getKeyChar();
        if (c<'0' || c>'9') evt.consume();
        // TODO add your handling code here:
    }                                  

    private void cedulavenFocusGained(java.awt.event.FocusEvent evt) {                                      
        if(this.boxidentidad.getSelectedIndex()==0 || this.boxidentidad.getSelectedIndex()==1 || this.boxidentidad.getSelectedIndex()==2){
            this.cedulaven.setDocument(new JTextFieldLimit(8));
        }
        if(this.boxidentidad.getSelectedIndex()==3 || this.boxidentidad.getSelectedIndex()==4){
            this.cedulaven.setDocument(new JTextFieldLimit(9));
        }
        // TODO add your handling code here:
    }                                     

    private void telefonovenKeyTyped(java.awt.event.KeyEvent evt) {                                     
        char c = evt.getKeyChar();
        if (c<'0' || c>'9') evt.consume();
    }                                    

    private void codigoinvKeyTyped(java.awt.event.KeyEvent evt) {                                   
        char c = evt.getKeyChar();
        if (c<'0' || c>'9') evt.consume();
    }                                  

    private void costovenKeyTyped(java.awt.event.KeyEvent evt) {                                  
        char c = evt.getKeyChar();
        if (c<'0' || c>'9') evt.consume();
    }                                 

    private void textocantKeyTyped(java.awt.event.KeyEvent evt) {                                   
        char c = evt.getKeyChar();
        if (c<'0' || c>'9') evt.consume();
    }                                  

    private void telefonovenFocusGained(java.awt.event.FocusEvent evt) {                                        
        this.telefonoven.setDocument(new JTextFieldLimit(11));
    }                                       

    private void codigoinvFocusGained(java.awt.event.FocusEvent evt) {                                      
        if(this.boxidentidad.getSelectedIndex()==0 || this.boxidentidad.getSelectedIndex()==1 || this.boxidentidad.getSelectedIndex()==2){
            this.codigoinv.setDocument(new JTextFieldLimit(15));
        }
        if(this.boxidentidad.getSelectedIndex()==3 || this.boxidentidad.getSelectedIndex()==4){
            this.codigoinv.setDocument(new JTextFieldLimit(15));
        }
    }                                     

    private void costovenFocusGained(java.awt.event.FocusEvent evt) {                                     
        if(this.boxidentidad.getSelectedIndex()==0 || this.boxidentidad.getSelectedIndex()==1 || this.boxidentidad.getSelectedIndex()==2){
            this.costoven.setDocument(new JTextFieldLimit(15));
        }
        if(this.boxidentidad.getSelectedIndex()==3 || this.boxidentidad.getSelectedIndex()==4){
            this.costoven.setDocument(new JTextFieldLimit(15));
        }
    }                                    

    private void textocantFocusGained(java.awt.event.FocusEvent evt) {                                      
        if(this.boxidentidad.getSelectedIndex()==0 || this.boxidentidad.getSelectedIndex()==1 || this.boxidentidad.getSelectedIndex()==2){
            this.textocant.setDocument(new JTextFieldLimit(8));
        }
        if(this.boxidentidad.getSelectedIndex()==3 || this.boxidentidad.getSelectedIndex()==4){
            this.textocant.setDocument(new JTextFieldLimit(8));
        }
    }                                     

    private void costovenKeyReleased(java.awt.event.KeyEvent evt) {                                     
       if(this.costoven.getText().equals("0") || this.costoven.getText().equals("")){
            JOptionPane.showMessageDialog(new JFrame(),"Rellene el campo con un valor distinto de 0","Mensaje",JOptionPane.INFORMATION_MESSAGE);
        }
        else{
        Integer cant = Integer.parseInt(this.textocant.getText());
        float mostrarcosto=Float.parseFloat(this.costoven.getText())*cant;
        float mostrariva= (Float.parseFloat(this.costoven.getText())*cant)*16/100;
        this.costotal.setText(Float.toString(mostrarcosto));
        this.iva.setText(Float.toString(mostrariva));
        }
    }                                    

    private void textocantKeyReleased(java.awt.event.KeyEvent evt) {                                      
        if(this.textocant.getText().equals("0") || this.textocant.getText().equals("")){
            JOptionPane.showMessageDialog(new JFrame(),"Rellene el campo con un valor distinto de 0","Mensaje",JOptionPane.INFORMATION_MESSAGE);
        }
        else{
                    Integer cant = Integer.parseInt(this.textocant.getText());
        float mostrarcosto=Float.parseFloat(this.costoven.getText())*cant;
        float mostrariva= (Float.parseFloat(this.costoven.getText())*cant)*16/100;
        this.costotal.setText(Float.toString(mostrarcosto));
        this.iva.setText(Float.toString(mostrariva));
        }
    }                                     

    /**
     * @param args the command line arguments
     */
  

    // Variables declaration - do not modify                     
    private javax.swing.JTextField apellidoven;
    private javax.swing.JComboBox<String> boxidentidad;
    private javax.swing.JTextField cedulaven;
    private javax.swing.JTextField codigoinv;
    private javax.swing.JTextField costotal;
    private javax.swing.JTextField costoven;
    private javax.swing.JTextField direccionven;
    private com.toedter.calendar.JDateChooser fechaven;
    private javax.swing.JTextField iva;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel16;
    private javax.swing.JLabel jLabel17;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JLabel jLabelBuscar;
    private javax.swing.JLabel jLabelRegistrar;
    private javax.swing.JLayeredPane jLayeredPane1;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JLabel jlabelagregarcliente;
    private javax.swing.JTextField nombreven;
    private javax.swing.JTextField productoven;
    private javax.swing.JTextField telefonoven;
    private javax.swing.JTextField textocant;
    // End of variables declaration                   
}
